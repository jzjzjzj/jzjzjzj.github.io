<html>
  <head>
    <script src="BluetoothTerminal.js"></script>
  </head>
  <body>
    <input type="button" value="connect" onclick="connect()">
    <input type="button" value="send" onclick="send()">
    <input type="button" value="disconnect" onclick="disconnect()">

    <div id="received"></div>

    <script>
      // Obtain configured instance.
      let terminal = new BluetoothTerminal();
      let received = []

      // Override `receive` method to handle incoming data as you want.
      terminal.receive = function(data) {
        let ms = (new Date()).getMilliseconds()
        let result = ''

        received.unshift({data: data, ms: ms})
        if(received.length > 30) received.pop()

        received.forEach(d => result += `<div><b>${d.data}</b> <i>(${d.ms})</i></div>`)
        document.getElementById('received').innerHTML = result
      };

      function connect() {
        // Request the device for connection and get its name after successful connection.
        terminal.connect().then(() => {
          alert(terminal.getDeviceName() + ' is connected!');
        });
      }

      function send() {
        // Send something to the connected device.
        terminal.send('Simon says: Hello, world!');
      }

      function disconnect() {
        // Disconnect from the connected device.
        terminal.disconnect();
      }
    </script>
  </body>
</html>
